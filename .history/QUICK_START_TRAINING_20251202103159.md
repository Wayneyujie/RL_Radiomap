# å¿«é€Ÿå¼€å§‹è®­ç»ƒæŒ‡å—

## âœ… é—®é¢˜å·²è§£å†³

ä¹‹å‰çš„ `visualize_training.py` åªæ˜¯å¯è§†åŒ–ï¼Œä¸ä¼šè¿›è¡Œè®­ç»ƒã€‚ç°åœ¨å·²ç»åˆ›å»ºäº† `train_with_yaml.py` ç”¨äº**çœŸæ­£çš„è®­ç»ƒ**ã€‚

## ğŸš€ å¼€å§‹è®­ç»ƒ

### åŸºæœ¬å‘½ä»¤

```bash
python train_with_yaml.py --yaml mpcom_ral_1220/map_editor_output.yaml --num-robots 2
```

### æ¨èè®­ç»ƒå‚æ•°

#### å¿«é€Ÿæµ‹è¯•ï¼ˆéªŒè¯åŠŸèƒ½ï¼‰
```bash
python train_with_yaml.py \
    --yaml mpcom_ral_1220/map_editor_output.yaml \
    --num-robots 2 \
    --total-timesteps 10000 \
    --eval-freq 2000
```

#### æ­£å¼è®­ç»ƒï¼ˆæ¨èï¼‰
```bash
python train_with_yaml.py \
    --yaml mpcom_ral_1220/map_editor_output.yaml \
    --num-robots 3 \
    --total-timesteps 100000 \
    --eval-freq 10000
```

#### é•¿æ—¶é—´è®­ç»ƒï¼ˆè·å¾—æ›´å¥½æ•ˆæœï¼‰
```bash
python train_with_yaml.py \
    --yaml mpcom_ral_1220/map_editor_output.yaml \
    --num-robots 3 \
    --total-timesteps 1000000 \
    --eval-freq 50000
```

## ğŸ“Š è®­ç»ƒè¿‡ç¨‹è¯´æ˜

è®­ç»ƒæ—¶ä¼šæ˜¾ç¤ºï¼š

1. **åˆå§‹åŒ–ä¿¡æ¯**ï¼š
   - âœ“ åŠ è½½YAMLé…ç½®
   - âœ“ åˆå§‹åŒ–ç¯å¢ƒå’Œæ™ºèƒ½ä½“
   - âœ“ åˆ›å»ºè®­ç»ƒå™¨

2. **è®­ç»ƒå¾ªç¯**ï¼š
   - æ¯ä¸ªepisodeçš„ä¿¡æ¯ï¼ˆepisodeæ•°ã€æ­¥æ•°ã€å¥–åŠ±ç­‰ï¼‰
   - å®šæœŸè¯„ä¼°å¹¶æ˜¾ç¤ºè¯„ä¼°ç»“æœ
   - è‡ªåŠ¨ä¿å­˜æ¨¡å‹

3. **è¾“å‡ºä½ç½®**ï¼š
   - æ¨¡å‹ä¿å­˜åœ¨ï¼š`pretrained_models/training_YYYY-MM-DD-HH-MM-SS/seed_X/`
   - è¯„ä¼°æ•°æ®ï¼š`evaluations.npz`
   - è®­ç»ƒé…ç½®ï¼š`training_config.json`

## ğŸ” è®­ç»ƒçŠ¶æ€åˆ¤æ–­

**è®­ç»ƒæ­£å¸¸è¿›è¡Œ**çš„æ ‡å¿—ï¼š
- âœ… çœ‹åˆ° "======== Episode Info ========" è¾“å‡º
- âœ… çœ‹åˆ°æœºå™¨äººå¥–åŠ±å’ŒçŠ¶æ€ä¿¡æ¯
- âœ… çœ‹åˆ° "======== Robots Info ========" è¾“å‡º
- âœ… å®šæœŸæ˜¾ç¤ºè¯„ä¼°ç»“æœ

**å¦‚æœ"å¡ä½"**ï¼š
- æ£€æŸ¥æ˜¯å¦åœ¨ç­‰å¾…ç”¨æˆ·è¾“å…¥ï¼ˆä¸åº”è¯¥ï¼‰
- æ£€æŸ¥æ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯
- è®­ç»ƒå¯èƒ½éœ€è¦æ—¶é—´ï¼Œè€å¿ƒç­‰å¾…

## ğŸ“ˆ æŸ¥çœ‹è®­ç»ƒè¿›åº¦

è®­ç»ƒè¿‡ç¨‹ä¸­ä¼šæ˜¾ç¤ºï¼š
```
======== Episode Info ========
current ep_length: 150
current ep_num: 10
current exploration rate: 0.45
current timesteps: 1500
total timesteps: 100000
======== Episode Info ========

======== Robots Info ========
Robot 0 ep reward: 45.23, deactivated after reaching goal at step 120
Robot 1 ep reward: 38.67, deactivated after reaching goal at step 135
======== Robots Info ========
```

## ğŸ¯ è®­ç»ƒå®Œæˆå

è®­ç»ƒå®Œæˆåï¼Œå¯ä»¥ä½¿ç”¨è®­ç»ƒå¥½çš„æ¨¡å‹è¿›è¡Œå¯è§†åŒ–ï¼š

```bash
python scripts/visualize_training.py \
    --yaml mpcom_ral_1220/map_editor_output.yaml \
    --num-robots 2 \
    --model pretrained_models/training_XXXX/seed_0
```

## âš™ï¸ å‚æ•°è¯´æ˜

| å‚æ•° | è¯´æ˜ | é»˜è®¤å€¼ |
|------|------|--------|
| `--yaml` | YAMLé…ç½®æ–‡ä»¶è·¯å¾„ | **å¿…éœ€** |
| `--num-robots` | æœºå™¨äººæ•°é‡ | 3 |
| `--total-timesteps` | æ€»è®­ç»ƒæ­¥æ•° | 100000 |
| `--eval-freq` | æ¯Næ­¥è¯„ä¼°ä¸€æ¬¡ | 5000 |
| `--use-iqn` | ä½¿ç”¨IQNç®—æ³• | True |
| `--use-dqn` | ä½¿ç”¨DQNç®—æ³• | False |
| `--device` | cpuæˆ–cuda | cpu |
| `--load-model` | é¢„è®­ç»ƒæ¨¡å‹è·¯å¾„ | None |

## ğŸ’¡ æç¤º

1. **è®­ç»ƒéœ€è¦æ—¶é—´**ï¼šçœŸæ­£çš„å¼ºåŒ–å­¦ä¹ è®­ç»ƒéœ€è¦å¤§é‡æ—¶é—´æ­¥æ•°
2. **è§‚å¯Ÿå¥–åŠ±è¶‹åŠ¿**ï¼šepisodeå¥–åŠ±åº”è¯¥é€æ¸å¢åŠ 
3. **æˆåŠŸç‡**ï¼šè¯„ä¼°æ—¶ä¼šæ˜¾ç¤ºæˆåŠŸç‡ï¼Œåº”è¯¥é€æ¸æé«˜
4. **ä¿å­˜æ¨¡å‹**ï¼šè®­ç»ƒä¼šè‡ªåŠ¨ä¿å­˜ï¼Œå¯ä»¥éšæ—¶ä¸­æ–­

## ğŸ› å¸¸è§é—®é¢˜

**Q: è®­ç»ƒå¾ˆæ…¢æ€ä¹ˆåŠï¼Ÿ**
A: è¿™æ˜¯æ­£å¸¸çš„ï¼Œå¼ºåŒ–å­¦ä¹ è®­ç»ƒéœ€è¦æ—¶é—´ã€‚å¯ä»¥å…ˆç”¨å°æ­¥æ•°æµ‹è¯•ã€‚

**Q: å¦‚ä½•çŸ¥é“è®­ç»ƒæ˜¯å¦æœ‰æ•ˆï¼Ÿ**
A: è§‚å¯Ÿepisodeå¥–åŠ±å’Œè¯„ä¼°æˆåŠŸç‡æ˜¯å¦é€æ¸æé«˜ã€‚

**Q: å¯ä»¥ä¸­æ–­è®­ç»ƒå—ï¼Ÿ**
A: å¯ä»¥ï¼Œæ¨¡å‹ä¼šè‡ªåŠ¨ä¿å­˜ï¼Œä¸‹æ¬¡å¯ä»¥ç”¨ `--load-model` ç»§ç»­è®­ç»ƒã€‚

